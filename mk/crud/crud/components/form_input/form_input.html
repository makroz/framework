[[compile:]]

[* if '[[var:]]unico[[:var]]'=='1' *]

[% append js.inline %]
var old_[[var:]]id[[:var]]='{% echo $item[[[var:]]id[[:var]]]; %}';
function isUnique_[[var:]]id[[:var]](){
	var dato=$('#[[var:]]id[[:var]]').val();
	if (dato==''){
		$('.btnPrevAjax').show();
		return true;
	}
	if (dato!=old_[[var:]]id[[:var]]){
		$('.btnPrevAjax').hide();
		dataUnique($('#[[var:]]primary[[:var]]').val(),'[[var:]]id[[:var]]',dato,function(msg){
			if (msg!='0'){
				alertfocus('Ese {% echo $anexos[[[var:]]id[[:var]]][labelf] %} ya existe!!!','#[[var:]]id[[:var]]')
				//alert('Ese {% echo $anexos[[[var:]]id[[:var]]][labelf] %} ya existe!!!');
				//$('#[[var:]]id[[:var]]').focus();
			}else{
				old_[[var:]]id[[:var]]=dato;
				$('.btnPrevAjax').show();
			}
		});
	}
}
[% /append %]


[* /if *]

[[unique:]]{% php if ($_action=='ver'){  $clasver='ver';}else{  $clasver='';} %}[[:unique]]

[* if '[[var:]]tipo[[:var]]'=='alfa' *]
		<div class="input-field col [[var:]]clase[[:var]]">
	          <input id="[[var:]]id[[:var]]" name="[[var:]]id[[:var]]" type="text" class="alfa $clasver [[var:]]validate[[:var]]" width="[[var:]]tam[[:var]]" value='{% echo $item[[[var:]]id[[:var]]]; %}' [[var:]]eventos[[:var]] {% if $_action=='ver' %} disabled="disabled" {% /if %} >
	          <label for="[[var:]]id[[:var]]">{% echo $anexos[[[var:]]id[[:var]]][labelf] %}</label>
	          <div class="error_input">{$errors[[[var:]]id[[:var]]][0]}</div>
		</div>	
[* /if *]

[* if '[[var:]]tipo[[:var]]'=='date' *]
[[unique:]]
{% append js.files %}
	<link href='js/datedropper/datedropper.css' rel='stylesheet'>
	<script type='text/javascript' src='js/datedropper/datedropper.js'></script>
{% /append %}

{% append js.onready %}
	 $('input.datafecha').dateDropper();
{% /append %}
[[:unique]]
{% php $valor=\\Mk\\Tools\\Form::dbToDate($item[[[var:]]id[[:var]]]); %}
		<div class="input-field col [[var:]]clase[[:var]]">
	          <input id="[[var:]]id[[:var]]" name="[[var:]]id[[:var]]" type="text" class="alfa $clasver datafecha [[var:]]validate[[:var]]" width="[[var:]]tam[[:var]]" value='{% echo $valor; %}' [[var:]]eventos[[:var]] {% if $_action=='ver' %} disabled="disabled" {% /if %}  data-format="{% echo $_param->fecha->formato; %}" data-modal="true"  data-large-mode="true"  data-default-date="{% echo \\Mk\\Tools\\Form::dbToDate($item[[[var:]]id[[:var]]],false,'m-d-Y'); %}"  >
	          <label for="[[var:]]id[[:var]]">{% echo $anexos[[[var:]]id[[:var]]][labelf] %}</label>
	          <div class="error_input">{$errors[[[var:]]id[[:var]]][0]}</div>
		</div>	
[* /if *]


[* if '[[var:]]tipo[[:var]]'=='oculto' *]
	          <input  id="[[var:]]id[[:var]]" name="[[var:]]id[[:var]]" type="hidden" value='{% echo $item[[[var:]]id[[:var]]]; %}' >
[* /if *]

[* if '[[var:]]tipo[[:var]]'=='check' *]
	<div class="input-field col [[var:]]clase[[:var]]">

	 {% if $_action!='ver' %} 
      <input type="checkbox" id="[[var:]]id[[:var]]" name='[[var:]]id[[:var]]' class="check $clasver " value="[[var:]]dataon[[:var]]" {% if ($item[[[var:]]id[[:var]]]=="[[var:]]dataon[[:var]]") %} checked="checked" {% /if %} [[var:]]eventos[[:var]]  />
  {% /if %}
     {% else %}
     <input id="[[var:]]id[[:var]]" name="[[var:]]id[[:var]]" type="text" class="alfa $clasver [[var:]]validate[[:var]]" width="[[var:]]tam[[:var]]" value='{% php if ($item[[[var:]]id[[:var]]]=="[[var:]]dataon[[:var]]"){ $_valor= $anexos[[[var:]]id[[:var]]][labelon]; } else { $_valor=$anexos[[[var:]]id[[:var]]][labeloff];} %} {% echo $_valor; %}'  disabled="disabled"  >
     {% /else %}
    <label for="[[var:]]id[[:var]]">{% echo $anexos[[[var:]]id[[:var]]][labelf] %}</label>
     <div class="error_input">{$errors[[[var:]]id[[:var]]][0]}</div>
     </div>

[* /if *]

[* if '[[var:]]tipo[[:var]]'=='float' *]
		<div class="input-field col [[var:]]clase[[:var]]">
	          <input id="[[var:]]id[[:var]]" name="[[var:]]id[[:var]]" type="text" class="float $clasver [[var:]]validate[[:var]]" data-decimal='[[var:]]decimal[[:var]]' width="[[var:]]tam[[:var]]" value='{% echo $item[[[var:]]id[[:var]]]; %}'  [[var:]]eventos[[:var]] {% if $_action=='ver' %} disabled="disabled" {% /if %} >
	         <label for="[[var:]]id[[:var]]">{% echo $anexos[[[var:]]id[[:var]]][labelf] %}</label>
	          <div class="error_input">{$errors[[[var:]]id[[:var]]][0]}</div>
		</div>	

[* /if *]

[* if '[[var:]]tipo[[:var]]'=='int' *]
		<div class="input-field col [[var:]]clase[[:var]]">
	          <input id="[[var:]]id[[:var]]" name="[[var:]]id[[:var]]" type="text" class="float $clasver [[var:]]validate[[:var]]" data-rango='[[var:]]rango[[:var]]' width="[[var:]]tam[[:var]]" value='{% echo $item[[[var:]]id[[:var]]]; %}' [[var:]]eventos[[:var]] {% if $_action=='ver' %} disabled="disabled" {% /if %} >
	         <label for="[[var:]]id[[:var]]">{% echo $anexos[[[var:]]id[[:var]]][labelf] %}</label>
	          <div class="error_input">{$errors[[[var:]]id[[:var]]][0]}</div>
		</div>	

[* /if *]

[* if (('[[var:]]tipo[[:var]]'=='selec')||('[[var:]]tipo[[:var]]'=='selecdb')) *]
	{% php $options=\\Mk\\Tools\\Form::getOptions($anexos[[[var:]]id[[:var]]][options],$item[[[var:]]id[[:var]]],'Seleccione '.$anexos[[[var:]]id[[:var]]][labelf]); %}
		<div class="input-field col [[var:]]clase[[:var]]">
		 {% if $_action!='ver' %} 
		<select id="[[var:]]id[[:var]]" name="[[var:]]id[[:var]]" class="select $clasver [[var:]]validate[[:var]]"  [[var:]]eventos[[:var]]  >
      {% echo $options; %}
    </select>
     {% /if %}
     {% else %}
     <input id="[[var:]]id[[:var]]" name="[[var:]]id[[:var]]" type="text" class="alfa $clasver" width="[[var:]]tam[[:var]]" value='{% echo $anexos[[[var:]]id[[:var]]][options][$item[[[var:]]id[[:var]]]]; %}'  disabled="disabled"  >
     {% /else %}
    	          <label for="[[var:]]id[[:var]]">{% echo $anexos[[[var:]]id[[:var]]][labelf] %}</label>
    	          <div class="error_input">{$errors[[[var:]]id[[:var]]][0]}</div>
		</div>	

[* /if *]

[[:compile]]
